#!/bin/bash 
#SBATCH --job-name=tbgp-3
#SBATCH --time=72:00:00
#SBATCH --output=out/tbgp-3.out
#SBATCH --mem=16G
#SBATCH --open-mode=append
#SBATCH --array=0-269

games=('coevol_uo_40:cmp6'
        'coevol_uo_40:cmp8'
        'coevol_uo_40:maj6'
        'coevol_uo_40:mux6'
        'coevol_uo_40:par5'
        'coevol_uo_40:disc1'
        'coevol_uo_40:disc2'
        'coevol_uo_40:disc3'
        'coevol_uo_40:disc4'
        'coevol_uo_40:disc5'
        'coevol_uo_40:malcev1'
        'coevol_uo_40:malcev2'
        'coevol_uo_40:malcev3'
        'coevol_uo_40:malcev4'
        'coevol_uo_40:malcev5'
        'coevol_uo2_50:cmp6'
        'coevol_uo2_50:cmp8'
        'coevol_uo2_50:maj6'
        'coevol_uo2_50:mux6'
        'coevol_uo2_50:par5'
        'coevol_uo2_50:disc1'
        'coevol_uo2_50:disc2'
        'coevol_uo2_50:disc3'
        'coevol_uo2_50:disc4'
        'coevol_uo2_50:disc5'
        'coevol_uo2_50:malcev1'
        'coevol_uo2_50:malcev2'
        'coevol_uo2_50:malcev3'
        'coevol_uo2_50:malcev4'
        'coevol_uo2_50:malcev5'
        'ifs:cmp6'
        'ifs:cmp8'
        'ifs:maj6'
        'ifs:mux6'
        'ifs:par5'
        'ifs:disc1'
        'ifs:disc2'
        'ifs:disc3'
        'ifs:disc4'
        'ifs:disc5'
        'ifs:malcev1'
        'ifs:malcev2'
        'ifs:malcev3'
        'ifs:malcev4'
        'ifs:malcev5'
        'ifs_0:cmp6'
        'ifs_0:cmp8'
        'ifs_0:maj6'
        'ifs_0:mux6'
        'ifs_0:par5'
        'ifs_0:disc1'
        'ifs_0:disc2'
        'ifs_0:disc3'
        'ifs_0:disc4'
        'ifs_0:disc5'
        'ifs_0:malcev1'
        'ifs_0:malcev2'
        'ifs_0:malcev3'
        'ifs_0:malcev4'
        'ifs_0:malcev5'
        'doc_d_0:cmp6'
        'doc_d_0:cmp8'
        'doc_d_0:maj6'
        'doc_d_0:mux6'
        'doc_d_0:par5'
        'doc_d_0:disc1'
        'doc_d_0:disc2'
        'doc_d_0:disc3'
        'doc_d_0:disc4'
        'doc_d_0:disc5'
        'doc_d_0:malcev1'
        'doc_d_0:malcev2'
        'doc_d_0:malcev3'
        'doc_d_0:malcev4'
        'doc_d_0:malcev5'
        'doc_p_0:cmp6'
        'doc_p_0:cmp8'
        'doc_p_0:maj6'
        'doc_p_0:mux6'
        'doc_p_0:par5'
        'doc_p_0:disc1'
        'doc_p_0:disc2'
        'doc_p_0:disc3'
        'doc_p_0:disc4'
        'doc_p_0:disc5'
        'doc_p_0:malcev1'
        'doc_p_0:malcev2'
        'doc_p_0:malcev3'
        'doc_p_0:malcev4'
        'doc_p_0:malcev5'
        'dof_w_3_0:cmp6'
        'dof_w_3_0:cmp8'
        'dof_w_3_0:maj6'
        'dof_w_3_0:mux6'
        'dof_w_3_0:par5'
        'dof_w_3_0:disc1'
        'dof_w_3_0:disc2'
        'dof_w_3_0:disc3'
        'dof_w_3_0:disc4'
        'dof_w_3_0:disc5'
        'dof_w_3_0:malcev1'
        'dof_w_3_0:malcev2'
        'dof_w_3_0:malcev3'
        'dof_w_3_0:malcev4'
        'dof_w_3_0:malcev5'
        'dof_wh_3_0:cmp6'
        'dof_wh_3_0:cmp8'
        'dof_wh_3_0:maj6'
        'dof_wh_3_0:mux6'
        'dof_wh_3_0:par5'
        'dof_wh_3_0:disc1'
        'dof_wh_3_0:disc2'
        'dof_wh_3_0:disc3'
        'dof_wh_3_0:disc4'
        'dof_wh_3_0:disc5'
        'dof_wh_3_0:malcev1'
        'dof_wh_3_0:malcev2'
        'dof_wh_3_0:malcev3'
        'dof_wh_3_0:malcev4'
        'dof_wh_3_0:malcev5'
        'cov_ht_bp:cmp6'
        'cov_ht_bp:cmp8'
        'cov_ht_bp:maj6'
        'cov_ht_bp:mux6'
        'cov_ht_bp:par5'
        'cov_ht_bp:disc1'
        'cov_ht_bp:disc2'
        'cov_ht_bp:disc3'
        'cov_ht_bp:disc4'
        'cov_ht_bp:disc5'
        'cov_ht_bp:malcev1'
        'cov_ht_bp:malcev2'
        'cov_ht_bp:malcev3'
        'cov_ht_bp:malcev4'
        'cov_ht_bp:malcev5'
        'cov_rt_bp:cmp6'
        'cov_rt_bp:cmp8'
        'cov_rt_bp:maj6'
        'cov_rt_bp:mux6'
        'cov_rt_bp:par5'
        'cov_rt_bp:disc1'
        'cov_rt_bp:disc2'
        'cov_rt_bp:disc3'
        'cov_rt_bp:disc4'
        'cov_rt_bp:disc5'
        'cov_rt_bp:malcev1'
        'cov_rt_bp:malcev2'
        'cov_rt_bp:malcev3'
        'cov_rt_bp:malcev4'
        'cov_rt_bp:malcev5'
        'gp:cmp6'
        'gp:cmp8'
        'gp:maj6'
        'gp:mux6'
        'gp:par5'
        'gp:disc1'
        'gp:disc2'
        'gp:disc3'
        'gp:disc4'
        'gp:disc5'
        'gp:malcev1'
        'gp:malcev2'
        'gp:malcev3'
        'gp:malcev4'
        'gp:malcev5'
        'gp_0:cmp6'
        'gp_0:cmp8'
        'gp_0:maj6'
        'gp_0:mux6'
        'gp_0:par5'
        'gp_0:disc1'
        'gp_0:disc2'
        'gp_0:disc3'
        'gp_0:disc4'
        'gp_0:disc5'
        'gp_0:malcev1'
        'gp_0:malcev2'
        'gp_0:malcev3'
        'gp_0:malcev4'
        'gp_0:malcev5'
        'doc_d:cmp6'
        'doc_d:cmp8'
        'doc_d:maj6'
        'doc_d:mux6'
        'doc_d:par5'
        'doc_d:disc1'
        'doc_d:disc2'
        'doc_d:disc3'
        'doc_d:disc4'
        'doc_d:disc5'
        'doc_d:malcev1'
        'doc_d:malcev2'
        'doc_d:malcev3'
        'doc_d:malcev4'
        'doc_d:malcev5'
        'doc_p:cmp6'
        'doc_p:cmp8'
        'doc_p:maj6'
        'doc_p:mux6'
        'doc_p:par5'
        'doc_p:disc1'
        'doc_p:disc2'
        'doc_p:disc3'
        'doc_p:disc4'
        'doc_p:disc5'
        'doc_p:malcev1'
        'doc_p:malcev2'
        'doc_p:malcev3'
        'doc_p:malcev4'
        'doc_p:malcev5'
        'dof_w_3:cmp6'
        'dof_w_3:cmp8'
        'dof_w_3:maj6'
        'dof_w_3:mux6'
        'dof_w_3:par5'
        'dof_w_3:disc1'
        'dof_w_3:disc2'
        'dof_w_3:disc3'
        'dof_w_3:disc4'
        'dof_w_3:disc5'
        'dof_w_3:malcev1'
        'dof_w_3:malcev2'
        'dof_w_3:malcev3'
        'dof_w_3:malcev4'
        'dof_w_3:malcev5'
        'dof_wh_3:cmp6'
        'dof_wh_3:cmp8'
        'dof_wh_3:maj6'
        'dof_wh_3:mux6'
        'dof_wh_3:par5'
        'dof_wh_3:disc1'
        'dof_wh_3:disc2'
        'dof_wh_3:disc3'
        'dof_wh_3:disc4'
        'dof_wh_3:disc5'
        'dof_wh_3:malcev1'
        'dof_wh_3:malcev2'
        'dof_wh_3:malcev3'
        'dof_wh_3:malcev4'
        'dof_wh_3:malcev5'
        'do_nsga:cmp6'
        'do_nsga:cmp8'
        'do_nsga:maj6'
        'do_nsga:mux6'
        'do_nsga:par5'
        'do_nsga:disc1'
        'do_nsga:disc2'
        'do_nsga:disc3'
        'do_nsga:disc4'
        'do_nsga:disc5'
        'do_nsga:malcev1'
        'do_nsga:malcev2'
        'do_nsga:malcev3'
        'do_nsga:malcev4'
        'do_nsga:malcev5'
        'do_nsga_0:cmp6'
        'do_nsga_0:cmp8'
        'do_nsga_0:maj6'
        'do_nsga_0:mux6'
        'do_nsga_0:par5'
        'do_nsga_0:disc1'
        'do_nsga_0:disc2'
        'do_nsga_0:disc3'
        'do_nsga_0:disc4'
        'do_nsga_0:disc5'
        'do_nsga_0:malcev1'
        'do_nsga_0:malcev2'
        'do_nsga_0:malcev3'
        'do_nsga_0:malcev4'
        'do_nsga_0:malcev5')

game=${games[$SLURM_ARRAY_TASK_ID]}

echo "Starting job $SLURM_ARRAY_TASK_ID with setup $game"

module rm apps/python/3.8.5
module load apps/anaconda/5.3.1

source activate cde-search-env

srun python ~/cde-search/cli.py objs -sid "$game" -n 30 -out "$WORK/cde-search/tbgp-3.jsonlist"

echo "Done job $SLURM_ARRAY_TASK_ID with game $game"